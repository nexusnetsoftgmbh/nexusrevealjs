<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>DevInsights - Glue Tests</title>

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/nexus.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">

				<section class="panorama" data-background="assets/backgrounds/mountains01.jpg">
					<div class="nxs__logo">
						<img src="assets/nexus-united.png" alt="nexus united"/>
					</div>
                    <div class="nxs__title-wrapper">
					    <h1 class="nxs__title">Dev Insights</h1>
						<h3 class="nxs__title" style="float: right">Glue Tests</h3>
                    </div>
				</section>

				<section>
					<section class="code">
						<h1 class="code__title">Glue Tests</h1>
						<div class="code__text--wrapper">
							<div class="code__text">Glue Tests sind "einfach" und decken die PO anfrage ab.</div>
						</div>
						<div class="code__snippet--wrapper">
                        <pre>
                            <code class="hljs php">// tests/PowwowTest/Glue/ProductHighlightsRestApi/RestApi/ConcreteProductWithHighlightsCest.php
public function productConcreteHaveHighlights(ProductHighlightsApiTester $tester): void
{
	$sku = 'G-2010-07883';
	$url = $tester->buildConcreteProductDataUrl($sku);

	$tester->sendGET($url);

	$tester->seeResponseCodeIs(HttpCode::OK);
	$tester->seeResponseIsJson();
	$tester->assertProductDataResponseResourceHasHighlights();
}
							</code>
						</pre>
						</div>
						<div class="nxs__logo--background"></div>
						<div class="nxs__logo">
							<img src="assets/nexus-united.png" alt="nexus united"/>
						</div>
					</section>
					<section class="code">
						<h1 class="code__title">Glue Tests</h1>
						<div class="code__text--wrapper">
							<div class="code__text">Arrange</div>
						</div>
						<div class="code__snippet--wrapper">
                        <pre>
                            <code class="hljs php">public function buildConcreteProductDataUrl(string $sku): string
{
	return 'http://'.$this->formatFullUrl(
		'{urlData}/{resourceProductSku}',
		[
			'urlData' => 'concrete-products',
			'resourceProductSku' => $sku,
		]
	);
}
							</code>
						</pre>
						</div>
						<div class="nxs__logo--background"></div>
						<div class="nxs__logo">
							<img src="assets/nexus-united.png" alt="nexus united"/>
						</div>
					</section>
					<section class="code">
						<h1 class="code__title">Glue Tests</h1>
						<div class="code__text--wrapper">
							<div class="code__text">Act</div>
						</div>
						<div class="code__snippet--wrapper">
                        <pre>
                            <code class="hljs php">protected function execute($method, $url, $parameters = [], $files = [])
{
// allow full url to be requested
if (strpos($url, '://') === false) {
	$url = $this->config['url'] . $url;
	if ($this->config['url'] && strpos($url, '://') === false && $this->config['url'][0] !== '/') {
		$url = '/' . $url;
	}
}
...
							</code>
						</pre>
						</div>
						<div class="nxs__logo--background"></div>
						<div class="nxs__logo">
							<img src="assets/nexus-united.png" alt="nexus united"/>
						</div>
					</section>
					<section class="code">
						<h1 class="code__title">Glue Tests</h1>
						<div class="code__text--wrapper">
							<div class="code__text">Assert</div>
						</div>
						<div class="code__snippet--wrapper">
                        <pre>
                            <code class="hljs php">public function assertProductDataResponseResourceHasHighlights(): void
{
	$highlightData = $this->grabDataFromResponseByJsonPath('$.data.attributes.productHighlights');

	$this->assertNotEmpty($highlightData);
}
							</code>
						</pre>
						</div>
						<div class="nxs__logo--background"></div>
						<div class="nxs__logo">
							<img src="assets/nexus-united.png" alt="nexus united"/>
						</div>
					</section>
				</section>

				<section>
					<section class="list">
						<h1 class="list__title">Sind API Tests besser?</h1>
						<div class="list__text--wrapper">
							<div class="list__text fragment">
								<img src="assets/postman_logo.png" alt="" height="120px"/>
							</div>
						</div>
						<div class="list__text--wrapper fragment">
							<a href="https://github.com/postmanlabs/newman">github.com/postmanlabs/newman</a>
						</div>
						<div class="list__text--wrapper">
							<div class="list__text fragment">
								<img src="assets/insomnia_logo.png" alt="" height="120px"/>
							</div>
						</div>
						<div class="nxs__logo--background"></div>
						<div class="nxs__logo">
							<img src="assets/nexus-united.png" alt="nexus united"/>
						</div>
					</section>

					<section class="list">
						<h1 class="list__title">Sind API Tests besser?</h1>
						<div class="list__text">
							<ul>
								<li class="fragment">Nur GET testbar</li>
								<li class="fragment">nur statische tests</li>
								<li class="fragment">HttpClient ist nicht anpassbar</li>
							</ul>
							<div class="centered fragment" style="margin-top: 15px">
								<iframe src="https://giphy.com/embed/10pR6dUXHBpZSg" width="280" height="280" frameBorder="0" class="giphy-embed" allowFullScreen></iframe>
							</div>
						</div>
						<div class="nxs__logo--background"></div>
						<div class="nxs__logo">
							<img src="assets/nexus-united.png" alt="nexus united"/>
						</div>
					</section>

					<aside class="notes">
						Newman eine schnelle lösung für API Tests
					</aside>
				</section>

				<section class="list">
					<h1 class="list__title">Was sollte Glue Test abgedeckt sein?</h1>
					<div class="list__text">
						<ul>
							<li class="fragment">PO Akzeptanzkriterien</li>
							<li class="fragment">Daten die im Endpunkt gefordert sind</li>
							<li class="fragment">Festgelegte Schemata für die Kommunikation</li>
						</ul>
					</div>
					<div class="nxs__logo--background"></div>
					<div class="nxs__logo">
						<img src="assets/nexus-united.png" alt="nexus united"/>
					</div>
				</section>

				<section class="panorama" data-background="assets/backgrounds/mountains01.jpg">
					<div class="nxs__logo">
						<img src="assets/nexus-united.png" alt="nexus united"/>
					</div>
					<div class="nxs__title-wrapper">
						<h1 class="nxs__title">Fragen?</h1>
					</div>
				</section>
			</div>
		</div>

		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true }
				]
			});

            Reveal.addEventListener( 'slidechanged', function( event ) {
                let slideClass = Reveal.getCurrentSlide().className;

                function codeSlideFullWidth(className) {
                    if (slideClass.includes(className)) {
                        Reveal.configure({width: "100%"});
                    } else {
                        Reveal.configure({width: 960});
                    }
                }
                codeSlideFullWidth("full-width");
            } );
		</script>
	</body>
</html>
